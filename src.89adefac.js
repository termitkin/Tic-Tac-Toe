(function () {function e(e){return i(e)||g(e)||h()}function h(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function g(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function i(e){if(Array.isArray(e)){for(var r=0,t=new Array(e.length);r<e.length;r++)t[r]=e[r];return t}}var a={fieldCells:e(document.querySelectorAll(".field__cell")),playerScore:document.querySelector(".gamer__score"),botScore:document.querySelector(".bot__score"),refresh:document.querySelector("#refresh_JS"),again:document.querySelector("#again_JS"),message:document.querySelector("#message_JS"),winnerCombinations:[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]],winner:!1,botThinking:!1};var b=function(){var e=[];return a.fieldCells.forEach(function(t,i){""===t.innerHTML&&e.push(i)}),e};var d=function(){var n=a.fieldCells,i=a.winnerCombinations,e=function(e){for(var r={},t=0;t<i.length;t+=1){if(n[i[t][1]].innerHTML===e&&n[i[t][2]].innerHTML===e&&""===n[i[t][0]].innerHTML){r.status=!0,r.winnerCombinationNumber=t,r.positionInWinnerCombination=0;break}if(n[i[t][0]].innerHTML===e&&n[i[t][2]].innerHTML===e&&""===n[i[t][1]].innerHTML){r.status=!0,r.winnerCombinationNumber=t,r.positionInWinnerCombination=1;break}if(n[i[t][0]].innerHTML===e&&n[i[t][1]].innerHTML===e&&""===n[i[t][2]].innerHTML){r.status=!0,r.winnerCombinationNumber=t,r.positionInWinnerCombination=2;break}}return r},r=e("O"),t=e("X");!0===r.status?n[i[r.winnerCombinationNumber][r.positionInWinnerCombination]].innerHTML="O":!0===t.status?n[i[t.winnerCombinationNumber][t.positionInWinnerCombination]].innerHTML="O":function i(){var e=Math.round(8*Math.random());b().some(function(n){return n===e})?n[e].innerHTML="O":i()}()};var c=function(){a.winnerCombinations.forEach(function(e){if(e.every(function(e){return"X"===a.fieldCells[e].innerHTML})){a.winner=!0,a.message.innerHTML="YOU win this round";var t=Number(localStorage.getItem("playerScore"))+1;a.playerScore.innerHTML=t,localStorage.setItem("playerScore",t)}else if(e.every(function(e){return"O"===a.fieldCells[e].innerHTML})){a.winner=!0,a.message.innerHTML="BOT win this round";var r=Number(localStorage.getItem("botScore"))+1;a.botScore.innerHTML=r,localStorage.setItem("botScore",r)}}),!1===a.winner&&a.fieldCells.every(function(e){return""!==e.innerHTML})?(a.winner=!0,a.message.innerHTML="this round is a DRAW"):!1===a.winner&&(a.message.innerHTML="Your turn!")};var f=function(){if(a.message.innerHTML="Bot is thinking..",b().length>1&&!1===a.winner){var e=Math.round(2e3*Math.random());a.botThinking=!0,setTimeout(function(){d(),c(),a.botThinking=!1},e)}else 1===b().length&&!1===a.winner&&(d(),c())};var j=function(){localStorage.setItem("playerScore",0),localStorage.setItem("botScore",0),location.reload()};var k=function(){location.reload()};localStorage.length>0?(a.playerScore.innerHTML=localStorage.getItem("playerScore"),a.botScore.innerHTML=localStorage.getItem("botScore")):(localStorage.setItem("playerScore",0),localStorage.setItem("botScore",0),a.playerScore.innerHTML=localStorage.getItem("playerScore"),a.botScore.innerHTML=localStorage.getItem("botScore"));var l=Math.random();l>.5?f():a.message.innerHTML="Your turn!";var m=function(e){""===e.target.innerHTML&&!1===a.winner&&!1===a.botThinking&&(e.target.innerHTML="X",c(),!1===a.winner&&f())};a.refresh.addEventListener("click",j),a.again.addEventListener("click",k),a.fieldCells.forEach(function(e){e.addEventListener("click",m)});})();